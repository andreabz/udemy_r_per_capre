---
title: "R per capre - dal foglio di calcolo al report automatico"
subtitle: "Materiale di supporto per gli episodi 4 e 5 - importare i dati"
lang: it
format:
  pdf:
    documentclass: article
    papersize: a4
    margin-left: 2.5cm
    margin-right: 2.5cm
    margin-top: 3cm
    margin-bottom: 3cm
    fontsize: 11pt
    mainfont: Inter
    monofont: JetBrains Mono
    linkcolor: teal
    urlcolor: teal
    toc: false
---

::: {.small}
Repository del corso: <https://github.com/andreabz/udemy_r_per_capre>
:::

## Obiettivo degli episodi

In questi episodi abbiamo importato dati da file esterni:

- un file CSV  
- un file Excel  

Nel corso i dati non vengono inseriti a mano.  
Arrivano sempre da file già esistenti, come avviene nel lavoro reale.

Al termine di questa parte dovresti sapere:

- dove si trovano i dati nel progetto  
- quale funzione usare per importarli  
- quali problemi possono emergere nella fase di lettura  

Non è una guida completa all'importazione dati: è il minimo necessario per far funzionare il report.

---

## Dove si trovano i dati

Nel progetto del corso i dati si trovano nella cartella `data/`.

Contiene:

- file CSV  
- file Excel  

I file in `data/`:

- sono input del report  
- non vanno modificati direttamente  
- vengono letti così come sono  

Gli script e il report devono adattarsi ai dati, non il contrario.

---

## Importare dati da CSV

Per i file CSV utilizziamo la funzione `read.csv()`.

```{r}
#| eval: false

elenco_comuni <- read.csv("data/comuni_al.csv")
```

Il primo argomento è il percorso del file.

Argomenti comuni:

- `header = FALSE` se il file non contiene nomi di colonna
- `sep = ";"` se il separatore è il punto e virgola
- `dec = ","` se il separatore decimale è la virgola
- `encoding = "Latin-1"` in caso di problemi con caratteri accentati

Per vedere tutti gli argomenti disponibili `?read.csv` nella console di RStudio, come vedrai nell'episodio 8.

Il risultato è una tabella (`data.frame`).

## Importare dati da Excel

Per i file Excel utilizziamo il pacchetto `readxl`.

Installazione (una sola volta): `install.packages(readxl)` e poi caricamento e lettura:

```{r}
#| eval: false

library(readxl)

misure <- read_excel("data/dati_campioni.xlsx")
```

Anche `read_excel()` restituisce una tabella.

Argomenti utili includono:

- `sheet` per scegliere il foglio

- `range` per specificare l'intervallo di celle

Per la documentazione completa: `?read_excel()`.

Negli episodi successivi:

- vedremo come esplorare i dati appena importati

- sostituiremo `read.csv()` con `fread()` del pacchetto `data.table`

## Errori comuni

La fase di importazione è spesso delicata.

Problemi frequenti:

- date lette come testo
- numeri letti come caratteri
- nomi di colonna con spazi o maiuscole inattese
- caratteri accentati non interpretati correttamente

Nel corso non risolviamo tutto subito: prima importiamo, poi affrontiamo i problemi in modo sistematico.

## Come verranno usati i dati

I dati importati verranno utilizzati per:

- esplorazione
- pulizia
- aggregazioni
- grafici
- generazione del report
- rendering ripetuto

Se l'importazione è corretta, tutto il resto del flusso diventa più semplice.

## Punto chiave degli episodi

Il report non contiene dati scritti a mano.

- Legge file esterni dalla cartella `data/`
- li importa con funzioni appropriate
- e lavora su tabelle strutturate.

Questo è il primo passo per costruire un processo riproducibile.

## In sintesi

- i dati si trovano nella cartella `data/`
- CSV → `read.csv()` (per ora)
- Excel → `read_excel()`
- eventuali problemi si risolvono regolando gli argomenti delle funzioni

Questo è tutto ciò che serve sapere in questa fase del corso.
